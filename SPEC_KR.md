# One Message - ê¸°ìˆ  ëª…ì„¸ì„œ

**í”„ë¡œì íŠ¸ ì´ë¦„**: One Message (severalbible)
**ë²„ì „**: 1.0.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-21
**ê°œë°œ ìƒíƒœ**: 4ë‹¨ê³„ (ìˆ˜ìµí™” - 70% ì™„ë£Œ)

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì•„í‚¤í…ì²˜ ë° ë””ìì¸ íŒ¨í„´](#ì•„í‚¤í…ì²˜-ë°-ë””ìì¸-íŒ¨í„´)
4. [ì‚¬ìš©ì ë“±ê¸‰ ë° ê¸°ëŠ¥ ë§¤íŠ¸ë¦­ìŠ¤](#ì‚¬ìš©ì-ë“±ê¸‰-ë°-ê¸°ëŠ¥-ë§¤íŠ¸ë¦­ìŠ¤)
5. [ê°œë°œ ì§„í–‰ ìƒí™©](#ê°œë°œ-ì§„í–‰-ìƒí™©)
6. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
7. [ë„ë©”ì¸ ì—”í‹°í‹°](#ë„ë©”ì¸-ì—”í‹°í‹°)
8. [ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤](#ë¦¬í¬ì§€í† ë¦¬-ì¸í„°í˜ì´ìŠ¤)
9. [êµ¬í˜„ëœ ê¸°ëŠ¥](#êµ¬í˜„ëœ-ê¸°ëŠ¥)
10. [ìƒíƒœ ê´€ë¦¬](#ìƒíƒœ-ê´€ë¦¬)
11. [í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€](#í…ŒìŠ¤íŠ¸-ì»¤ë²„ë¦¬ì§€)
12. [íŒŒì¼ êµ¬ì¡°](#íŒŒì¼-êµ¬ì¡°)
13. [API ë¬¸ì„œ](#api-ë¬¸ì„œ)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ë¯¸ì…˜ ì„ ì–¸ë¬¸

One MessageëŠ” ì‚¬ìš©ìê°€ ë‹¤ìŒì„ í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì˜ì  ì„±ì¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤:
- **ì½ê¸°**: ë§¤ì¼ì˜ ì„±ê²½ êµ¬ì ˆê³¼ ì˜ì  ì½˜í…ì¸ 
- **ì“°ê¸°**: ê°œì¸ì ì¸ ë¬µìƒê³¼ ê¸°ë„ ë…¸íŠ¸
- **ë³´ê´€í•˜ê¸°**: ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì˜ì  ìì‚° ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¶•

### í•µì‹¬ ê°€ì¹˜

1. **ë‹¨ìˆœì„±**: ê¹¨ë—í•˜ê³  ì§‘ì¤‘ëœ ì˜ì  ì½˜í…ì¸  ì œê³µ
2. **ì§€ì† ê°€ëŠ¥ì„±**: í”„ë¦¬ë¯¸ì—„ êµ¬ë…ì„ í†µí•œ í”„ë¦¬ë¯¸ì—„(Freemium) ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸
3. **í’ˆì§ˆ**: ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ëŠ” TDD ê¸°ë°˜ ê°œë°œ

### ëŒ€ìƒ í”Œë«í¼

- **iOS**: iPhone/iPad (iOS 13+)
- **Android**: ìŠ¤ë§ˆíŠ¸í°/íƒœë¸”ë¦¿ (Android 6.0+)
- **ì£¼ìš” ì‹œì¥**: ëŒ€í•œë¯¼êµ­ (í•œêµ­ì–´)

---

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ

| ê¸°ìˆ  | ë²„ì „ | ëª©ì  |
|------------|---------|---------|
| Flutter | 3.10.4+ | í¬ë¡œìŠ¤í”Œë«í¼ UI í”„ë ˆì„ì›Œí¬ |
| Dart | 3.10.4+ | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ |
| Riverpod | 2.4.0 | ìƒíƒœ ê´€ë¦¬ |
| GoRouter | 13.0.0 | ë„¤ë¹„ê²Œì´ì…˜ ë° ë¼ìš°íŒ… |
| Freezed | 2.4.0 | ë¶ˆë³€ ë°ì´í„° í´ë˜ìŠ¤ |
| Dartz | 0.10.1 | í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° (Either íƒ€ì…) |

### ë°±ì—”ë“œ (Supabase)

| ê¸°ìˆ  | ëª©ì  |
|------------|---------|
| Supabase Auth | ì‚¬ìš©ì ì¸ì¦ (ì´ë©”ì¼, êµ¬ê¸€, ì• í”Œ) |
| PostgreSQL | ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ |
| Row Level Security | ê¶Œí•œ ë¶€ì—¬ ë° ë°ì´í„° ê²©ë¦¬ |
| RPC Functions | ì„œë²„ì‚¬ì´ë“œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| Edge Functions | ì„œë²„ë¦¬ìŠ¤ TypeScript/Deno í•¨ìˆ˜ |
| Realtime | ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë… |

### í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ

| ê¸°ìˆ  | ëª©ì  |
|------------|---------|
| flutter_test | ìœ ë‹› ë° ìœ„ì ¯ í…ŒìŠ¤íŠ¸ |
| integration_test | E2E í…ŒìŠ¤íŠ¸ |
| mockito/mocktail | ëª¨ì˜(Mocking) í”„ë ˆì„ì›Œí¬ |
| pgTAP | PostgreSQL í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ |
| GitHub Actions | CI/CD íŒŒì´í”„ë¼ì¸ |

### ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬

```yaml
dependencies:
  table_calendar: ^3.1.0      # ê¸°ë„ ë…¸íŠ¸ë¥¼ ìœ„í•œ ìº˜ë¦°ë” UI
  in_app_purchase: ^3.2.0     # iOS/Android IAP
  intl: ^0.19.0               # êµ­ì œí™”
  flutter_dotenv: ^5.1.0      # í™˜ê²½ ì„¤ì •
```

---

## ì•„í‚¤í…ì²˜ ë° ë””ìì¸ íŒ¨í„´

### í´ë¦° ì•„í‚¤í…ì²˜ ë ˆì´ì–´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´            â”‚
â”‚  (ìŠ¤í¬ë¦°, ìœ„ì ¯, í”„ë¡œë°”ì´ë”)             â”‚
â”‚  - UI ì»´í¬ë„ŒíŠ¸                          â”‚
â”‚  - ìƒíƒœ ê´€ë¦¬ (Riverpod)                 â”‚
â”‚  - ì‚¬ìš©ì ìƒí˜¸ì‘ìš©                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ë„ë©”ì¸ ë ˆì´ì–´                 â”‚
â”‚  (ì—”í‹°í‹°, ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤)        â”‚
â”‚  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§                        â”‚
â”‚  - ìˆœìˆ˜ Dart (ì˜ì¡´ì„± ì—†ìŒ)              â”‚
â”‚  - ë¶ˆë³€ ì—”í‹°í‹° (Freezed)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ë°ì´í„° ë ˆì´ì–´                  â”‚
â”‚  (ë¦¬í¬ì§€í† ë¦¬, ë°ì´í„°ì†ŒìŠ¤, ì„œë¹„ìŠ¤)       â”‚
â”‚  - Supabase í†µí•©                        â”‚
â”‚  - ì˜¤ë¥˜ ì²˜ë¦¬ (Either<L, R>)             â”‚
â”‚  - ë°ì´í„° ë³€í™˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ë””ìì¸ íŒ¨í„´

#### 1. ë¦¬í¬ì§€í† ë¦¬ íŒ¨í„´
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì¶”ìƒí™”
- ë„ë©”ì¸ ë ˆì´ì–´ì˜ ì¸í„°í˜ì´ìŠ¤, ë°ì´í„° ë ˆì´ì–´ì˜ êµ¬í˜„
- ëª¨ì˜(mock) ê°ì²´ë¥¼ ì‚¬ìš©í•œ ì†ì‰¬ìš´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

#### 2. í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì›ì¹™

**ë¶ˆë³€ì„±**:
```dart
@freezed
class Scripture with _$Scripture {
  const factory Scripture({
    required String id,
    required String content,
    // ... ë¶ˆë³€ í•„ë“œë“¤
  }) = _Scripture;
}
```

**ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ Either íƒ€ì…**:
```dart
Future<Either<Failure, List<Scripture>>> getDailyScriptures({
  required String userId,
  required int count,
});
// ì™¼ìª½ = ì˜¤ë¥˜, ì˜¤ë¥¸ìª½ = ì„±ê³µ
```

**ìˆœìˆ˜ í•¨ìˆ˜**:
- ë™ì¼í•œ ì…ë ¥ â†’ ë™ì¼í•œ ì¶œë ¥
- ë¶€ìˆ˜ íš¨ê³¼(Side effects) ì—†ìŒ
- í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•¨

#### 3. í”„ë¡œë°”ì´ë” íŒ¨í„´ (Riverpod)
- ì˜ì¡´ì„± ì£¼ì…
- ìƒíƒœ ê´€ë¦¬
- ìë™ íê¸°
- í”„ë¡œë°”ì´ë” ì¡°í•©

#### 4. ì˜ì¡´ì„± ì£¼ì…
```dart
// í”„ë¡œë°”ì´ë”ê°€ ìë™ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•¨
final scriptureRepositoryProvider = Provider<ScriptureRepository>((ref) {
  final dataSource = ref.watch(scriptureDataSourceProvider);
  return SupabaseScriptureRepository(dataSource);
});
```

---

## ì‚¬ìš©ì ë“±ê¸‰ ë° ê¸°ëŠ¥ ë§¤íŠ¸ë¦­ìŠ¤

### ë“±ê¸‰ ë¹„êµ

| ê¸°ëŠ¥ | ê²ŒìŠ¤íŠ¸ (ë¹„ë¡œê·¸ì¸) | íšŒì› (ë¬´ë£Œ) | í”„ë¦¬ë¯¸ì—„ (ìœ ë£Œ) |
|---------|-------------------|---------------|----------------|
| **ì„±ê²½ êµ¬ì ˆ ì ‘ê·¼** | ||||
| ë§¤ì¼ì˜ ì„±ê²½ êµ¬ì ˆ | 1ê°œ (ëœë¤, ì¤‘ë³µ ê°€ëŠ¥) | 3ê°œ (ì¤‘ë³µ ì—†ìŒ) | ì¼ë°˜ 3ê°œ + í”„ë¦¬ë¯¸ì—„ 3ê°œ |
| í”„ë¦¬ë¯¸ì—„ ì½˜í…ì¸  | âŒ | âŒ | âœ… |
| **ê¸°ë„ ë…¸íŠ¸** | ||||
| ë…¸íŠ¸ ì‘ì„± | âŒ | âœ… | âœ… |
| ê¸°ë¡ ë³´ê¸° | âŒ | ìµœê·¼ 3ì¼ | ë¬´ì œí•œ |
| ë³´ê´€ ê¸°ê°„ | âŒ | 7ì¼ | ì˜êµ¬ |
| **ìˆ˜ìµí™”** | ||||
| ìƒí–¥ íŒë§¤ ìœ ë„ | ë¡œê·¸ì¸ ì°¨ë‹¨ | ë³´ê´€ ë° ì½˜í…ì¸  ì œí•œ | ì—†ìŒ |
| ê°€ê²© | ë¬´ë£Œ | ë¬´ë£Œ | ì›” 9,900ì› ë˜ëŠ” ì—° 99,000ì› |

### ë“±ê¸‰ êµ¬í˜„

**ë°ì´í„°ë² ì´ìŠ¤**:
```sql
-- user_profiles.tier enum
CHECK (tier IN ('guest', 'member', 'premium'))
```

**Flutter**:
```dart
enum UserTier {
  guest,    // ë¹„ì¸ì¦ ë˜ëŠ” ì²´í—˜íŒ
  member,   // ë¬´ë£Œ ë“±ë¡ ì‚¬ìš©ì
  premium,  // ìœ ë£Œ êµ¬ë…ì
}
```

---

## ê°œë°œ ì§„í–‰ ìƒí™©

### ë‹¨ê³„ ìš”ì•½

| ë‹¨ê³„ | ì„¤ëª… | ìƒíƒœ | í…ŒìŠ¤íŠ¸ | ì§„í–‰ë¥  |
|-------|-------------|--------|-------|----------|
| 1ë‹¨ê³„ | í™˜ê²½ ë° ì¸ì¦ | âœ… ì™„ë£Œ | 24ê°œ | 100% |
| 2ë‹¨ê³„ | ì„±ê²½ êµ¬ì ˆ ì „ë‹¬ | âœ… ì™„ë£Œ | 60ê°œ | 100% |
| 3ë‹¨ê³„ | ê¸°ë„ ë…¸íŠ¸ ì‹œìŠ¤í…œ | âœ… ì™„ë£Œ | 59ê°œ | 100% |
| 4ë‹¨ê³„ | ìˆ˜ìµí™” | ğŸ”„ ì§„í–‰ ì¤‘ | 55/145ê°œ | 70% |
| 5ë‹¨ê³„ | ìµœì í™” ë° ì¶œì‹œ | â³ ëŒ€ê¸° ì¤‘ | 0ê°œ | 0% |

### 4ë‹¨ê³„ ì„¸ë¶€ ë‚´ì—­ (í˜„ì¬)

| í•˜ìœ„ ë‹¨ê³„ | ì„¤ëª… | ìƒíƒœ | í…ŒìŠ¤íŠ¸ |
|-----------|-------------|--------|-------|
| 4-1 | ë°ì´í„°ë² ì´ìŠ¤ ë° êµ¬ë… ìŠ¤í‚¤ë§ˆ | âœ… ì™„ë£Œ | pgTAP 25ê°œ + Edge Function 4ê°œ |
| 4-2 | êµ¬ë… ê¸°ëŠ¥ (TDD) | âœ… ì™„ë£Œ | Dart í…ŒìŠ¤íŠ¸ 55ê°œ |
| 4-3 | UI êµ¬í˜„ | â³ ëŒ€ê¸° ì¤‘ | 0/26ê°œ |

**ì´ ì™„ë£Œìœ¨**: 5ë‹¨ê³„ ì¤‘ 4ë‹¨ê³„, ì „ì²´ ì•½ 74%

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### í…Œì´ë¸” ê°œìš”

#### 1. user_profiles
**ëª©ì **: ì‚¬ìš©ì ë“±ê¸‰ ë° í”„ë¡œí•„ ì •ë³´ ì €ì¥

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | UUID | ê¸°ë³¸ í‚¤, auth.users(id) ì°¸ì¡° |
| tier | TEXT | ì‚¬ìš©ì ë“±ê¸‰: 'guest', 'member', 'premium' |
| created_at | TIMESTAMPTZ | ê³„ì • ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„ |
| updated_at | TIMESTAMPTZ | ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- ì‚¬ìš©ìëŠ” ìì‹ ì˜ í”„ë¡œí•„ì„ ë³´ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŒ
- ì„œë¹„ìŠ¤ ì—­í• ì€ ì „ì²´ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§

---

#### 2. scriptures
**ëª©ì **: ë§¤ì¼ì˜ ì„±ê²½ êµ¬ì ˆ ì½˜í…ì¸  ì €ì¥

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | UUID | ê¸°ë³¸ í‚¤ |
| book | TEXT | ì„±ê²½ ì±… ì´ë¦„ (ì˜ˆ: "ìš”í•œë³µìŒ") |
| chapter | INTEGER | ì¥ ë²ˆí˜¸ |
| verse | INTEGER | ì ˆ ë²ˆí˜¸ |
| content | TEXT | ì„±ê²½ êµ¬ì ˆ í…ìŠ¤íŠ¸ |
| reference | TEXT | í˜•ì‹í™”ëœ ì°¸ì¡° (ì˜ˆ: "ìš” 3:16") |
| is_premium | BOOLEAN | í”„ë¦¬ë¯¸ì—„ ì „ìš© ì½˜í…ì¸  í”Œë˜ê·¸ |
| category | TEXT | ì¹´í…Œê³ ë¦¬ (ì§€í˜œ, ì†Œë§, ë¯¿ìŒ ë“±) |
| created_at | TIMESTAMPTZ | ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„ |
| updated_at | TIMESTAMPTZ | ì—…ë°ì´íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- ëª¨ë“  ì¸ì¦ëœ ì‚¬ìš©ìëŠ” ì¼ë°˜ ì„±ê²½ êµ¬ì ˆì„ ë³¼ ìˆ˜ ìˆìŒ
- í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìë§Œ `is_premium = true`ì¸ ì„±ê²½ êµ¬ì ˆì„ ë³¼ ìˆ˜ ìˆìŒ

**ë”ë¯¸ ë°ì´í„°**: 23ê°œ ì„±ê²½ êµ¬ì ˆ (ì¼ë°˜ 15ê°œ + í”„ë¦¬ë¯¸ì—„ 8ê°œ)

---

#### 3. user_scripture_history
**ëª©ì **: ì‚¬ìš©ìê°€ ë³¸ ì„±ê²½ êµ¬ì ˆ ì¶”ì 

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | UUID | ê¸°ë³¸ í‚¤ |
| user_id | UUID | auth.users(id) ì°¸ì¡° |
| scripture_id | UUID | scriptures(id) ì°¸ì¡° |
| viewed_at | TIMESTAMPTZ | ì¡°íšŒ íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ê¸°ë¡ë§Œ ë³´ê±°ë‚˜ ì‚½ì…í•  ìˆ˜ ìˆìŒ
- ì¤‘ë³µ ë°©ì§€ ë¡œì§ì— ì‚¬ìš©ë¨

---

#### 4. prayer_notes
**ëª©ì **: ì‚¬ìš©ì ë¬µìƒ ë° ê¸°ë„ ê¸°ë¡ ì €ì¥

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | UUID | ê¸°ë³¸ í‚¤ |
| user_id | UUID | auth.users(id) ì°¸ì¡° |
| scripture_id | UUID | ì„ íƒì  ì„±ê²½ êµ¬ì ˆ ì°¸ì¡° |
| content | TEXT | ë…¸íŠ¸ ë‚´ìš© |
| created_at | TIMESTAMPTZ | ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„ |
| updated_at | TIMESTAMPTZ | ì—…ë°ì´íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- íšŒì›: ìµœê·¼ 3ì¼ê°„ì˜ ë…¸íŠ¸ë§Œ ë³¼ ìˆ˜ ìˆìŒ
- í”„ë¦¬ë¯¸ì—„: ëª¨ë“  ë…¸íŠ¸ë¥¼ ë³¼ ìˆ˜ ìˆìŒ
- ê²ŒìŠ¤íŠ¸: ì ‘ê·¼ ë¶ˆê°€

**ë³´ê´€**:
- 7ì¼ ì´ìƒ ëœ íšŒì› ë…¸íŠ¸ëŠ” ìë™ ì‚­ì œë¨
- í”„ë¦¬ë¯¸ì—„ ë…¸íŠ¸ëŠ” ì˜êµ¬ ë³´ê´€ë¨

---

#### 5. user_subscriptions
**ëª©ì **: í”„ë¦¬ë¯¸ì—„ êµ¬ë… ìƒíƒœ ì¶”ì 

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | UUID | ê¸°ë³¸ í‚¤ |
| user_id | UUID | auth.users(id) ì°¸ì¡°, UNIQUE |
| product_id | TEXT | 'monthly_premium' ë˜ëŠ” 'annual_premium' |
| platform | TEXT | 'ios', 'android' ë˜ëŠ” 'web' |
| store_transaction_id | TEXT | ì˜ìˆ˜ì¦ ê²€ì¦ ID |
| original_transaction_id | TEXT | ìµœì´ˆ êµ¬ë§¤ ID (ê°±ì‹ ìš©) |
| subscription_status | TEXT | 'active', 'canceled', 'expired', 'pending', 'grace_period' |
| started_at | TIMESTAMPTZ | êµ¬ë… ì‹œì‘ì¼ |
| expires_at | TIMESTAMPTZ | ë§Œë£Œì¼ (í‰ìƒ êµ¬ë…ì˜ ê²½ìš° NULL) |
| auto_renew | BOOLEAN | ìë™ ê°±ì‹  í™œì„±í™” ì—¬ë¶€ |
| cancellation_reason | TEXT | ì·¨ì†Œ ì‚¬ìœ  |
| created_at | TIMESTAMPTZ | ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„ |
| updated_at | TIMESTAMPTZ | ì—…ë°ì´íŠ¸ íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- ì‚¬ìš©ìëŠ” ìì‹ ì˜ êµ¬ë…ë§Œ ë³¼ ìˆ˜ ìˆìŒ
- ì„œë¹„ìŠ¤ ì—­í• ë§Œ ì‚½ì…/ì—…ë°ì´íŠ¸/ì‚­ì œ ê°€ëŠ¥

---

#### 6. subscription_products
**ëª©ì **: ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ë… ìƒí’ˆ ì •ì˜

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|--------|------|-------------|
| id | TEXT | ê¸°ë³¸ í‚¤ ('monthly_premium', 'annual_premium') |
| name | TEXT | ìƒí’ˆ ì´ë¦„ |
| description | TEXT | ìƒí’ˆ ì„¤ëª… |
| duration_days | INTEGER | 30 (ì›”ê°„), 365 (ì—°ê°„), NULL (í‰ìƒ) |
| price_krw | INTEGER | ì›í™” ê°€ê²© |
| price_usd | DECIMAL | ë‹¬ëŸ¬ ê°€ê²© |
| ios_product_id | TEXT | App Store Connect ìƒí’ˆ ID |
| android_product_id | TEXT | Google Play ìƒí’ˆ ID |
| is_active | BOOLEAN | ìƒí’ˆ ê°€ìš©ì„± |
| created_at | TIMESTAMPTZ | ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„ |

**RLS ì •ì±…**:
- ëª¨ë“  ì‚¬ìš©ìëŠ” í™œì„± ìƒí’ˆì„ ë³¼ ìˆ˜ ìˆìŒ

**ìƒí’ˆ**:
1. `monthly_premium`: ì›” 9,900ì›
2. `annual_premium`: ì—° 99,000ì› (2ê°œì›” ë¬´ë£Œ)

---

### RPC í•¨ìˆ˜

#### ì„±ê²½ êµ¬ì ˆ í•¨ìˆ˜ (4ê°œ í•¨ìˆ˜)

1. **get_random_scripture**(count INTEGER)
   - ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¥¼ ìœ„í•´ ëœë¤ ì„±ê²½ êµ¬ì ˆ ë°˜í™˜
   - ì¤‘ë³µ í—ˆìš©

2. **get_daily_scriptures**(user_id UUID, count INTEGER)
   - íšŒì›ì„ ìœ„í•´ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ì„±ê²½ êµ¬ì ˆ ë°˜í™˜
   - ì˜¤ëŠ˜ ì´ë¯¸ ë³¸ ì„±ê²½ êµ¬ì ˆ ì œì™¸

3. **get_premium_scriptures**(user_id UUID, count INTEGER)
   - í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìë¥¼ ìœ„í•´ í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ ë°˜í™˜
   - ì¤‘ë³µ ë°©ì§€ ë¡œì§ ì ìš©

4. **record_scripture_view**(user_id UUID, scripture_id UUID)
   - ì¡°íšŒ ê¸°ë¡ ê¸°ë¡
   - ì¤‘ë³µ ë°©ì§€ì— ì‚¬ìš©

#### ê¸°ë„ ë…¸íŠ¸ í•¨ìˆ˜ (7ê°œ í•¨ìˆ˜)

1. **create_prayer_note**(user_id UUID, content TEXT, scripture_id UUID)
2. **get_prayer_notes**(user_id UUID, start_date DATE, end_date DATE)
3. **get_prayer_notes_by_date**(user_id UUID, date DATE)
4. **update_prayer_note**(note_id UUID, content TEXT)
5. **delete_prayer_note**(note_id UUID)
6. **is_date_accessible**(user_id UUID, date DATE)
7. **get_notes_with_scripture**(user_id UUID, start_date DATE, end_date DATE)

#### êµ¬ë… í•¨ìˆ˜ (5ê°œ í•¨ìˆ˜)

1. **get_subscription_status**(user_id UUID)
   - í˜„ì¬ êµ¬ë… ìƒíƒœì™€ í™œì„± ì—¬ë¶€ ë°˜í™˜

2. **activate_subscription**(user_id, product_id, platform, transaction_id, original_transaction_id)
   - êµ¬ë§¤ ê²€ì¦ í›„ êµ¬ë… í™œì„±í™”
   - ì‚¬ìš©ì ë“±ê¸‰ì„ í”„ë¦¬ë¯¸ì—„ìœ¼ë¡œ ì—…ë°ì´íŠ¸

3. **cancel_subscription**(user_id UUID, reason TEXT)
   - êµ¬ë… ì·¨ì†Œ (ë§Œë£Œì¼ê¹Œì§€ ì ‘ê·¼ ìœ ì§€)

4. **get_available_products**(platform TEXT)
   - í™œì„± êµ¬ë… ìƒí’ˆ ë°˜í™˜

5. **has_active_premium**(user_id UUID)
   - í”„ë¦¬ë¯¸ì—„ ì ‘ê·¼ ê¶Œí•œ ì—¬ë¶€ Boolean í™•ì¸

---

### Edge í•¨ìˆ˜ (5ê°œ í•¨ìˆ˜)

#### 1. verify-ios-receipt
**ëª©ì **: Appleê³¼ iOS êµ¬ë§¤ ì˜ìˆ˜ì¦ ê²€ì¦

**ì—”ë“œí¬ì¸íŠ¸**: `POST /functions/v1/verify-ios-receipt`

**ìš”ì²­**:
```json
{
  "receipt": "base64_encoded_receipt",
  "userId": "user_uuid"
}
```

**ì‘ë‹µ**:
```json
{
  "valid": true,
  "transactionId": "1000000123456789",
  "originalTransactionId": "1000000123456789",
  "productId": "com.onemessage.monthly",
  "expiresDate": "1704067200000"
}
```

---

#### 2. verify-android-receipt
**ëª©ì **: Google Playì™€ Android êµ¬ë§¤ ê²€ì¦

**ì—”ë“œí¬ì¸íŠ¸**: `POST /functions/v1/verify-android-receipt`

**ìš”ì²­**:
```json
{
  "purchaseToken": "google_purchase_token",
  "productId": "monthly_premium_sub",
  "userId": "user_uuid"
}
```

---

#### 3. subscription-webhook
**ëª©ì **: Apple/Googleì˜ êµ¬ë… ê°±ì‹ /ì·¨ì†Œ ì›¹í›… ì²˜ë¦¬

**ì—”ë“œí¬ì¸íŠ¸**: `POST /functions/v1/subscription-webhook`

**ì²˜ë¦¬ ë‚´ìš©**:
- êµ¬ë… ê°±ì‹ 
- êµ¬ë… ì·¨ì†Œ
- êµ¬ë… ë§Œë£Œ
- ìœ ì˜ˆ ê¸°ê°„ ì•Œë¦¼

---

#### 4. check-expired-subscriptions
**ëª©ì **: ë§Œë£Œëœ êµ¬ë…ì„ í™•ì¸í•˜ê³  ë“±ê¸‰ì„ ë‚´ë¦¬ëŠ” í¬ë¡  ì¡

**ìŠ¤ì¼€ì¤„**: ë§¤ì¼ UTC 2ì‹œ

**ë™ì‘**:
- `expires_at < NOW()`ì´ê³  ìƒíƒœê°€ 'active'ì¸ êµ¬ë… ì°¾ê¸°
- ìƒíƒœë¥¼ 'expired'ë¡œ ì—…ë°ì´íŠ¸
- ì‚¬ìš©ì ë“±ê¸‰ì„ 'premium'ì—ì„œ 'member'ë¡œ ë‚´ë¦¬ê¸°

---

#### 5. cleanup-old-notes
**ëª©ì **: íšŒì› ë“±ê¸‰ì˜ 7ì¼ ì´ìƒ ëœ ê¸°ë„ ë…¸íŠ¸ ì‚­ì œ

**ìŠ¤ì¼€ì¤„**: ë§¤ì¼ UTC 3ì‹œ

**ë¡œì§**:
```sql
DELETE FROM prayer_notes
WHERE user_id IN (SELECT id FROM user_profiles WHERE tier = 'member')
  AND created_at < NOW() - INTERVAL '7 days';
```

---

## ë„ë©”ì¸ ì—”í‹°í‹°

### 1. UserProfile

**íŒŒì¼**: `lib/features/auth/domain/user_profile.dart`

```dart
@freezed
class UserProfile with _$UserProfile {
  const factory UserProfile({
    required String id,
    required UserTier tier,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _UserProfile;
}

enum UserTier {
  guest,
  member,
  premium,
}
```

---

### 2. Scripture

**íŒŒì¼**: `lib/features/scripture/domain/entities/scripture.dart`

```dart
@freezed
class Scripture with _$Scripture {
  const factory Scripture({
    required String id,
    required String book,
    required int chapter,
    required int verse,
    required String content,
    required String reference,
    @Default(false) bool isPremium,
    String? category,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _Scripture;
}
```

**ì†ì„±**:
- `id`: ê³ ìœ  ì‹ë³„ì (UUID)
- `book`: ì„±ê²½ ì±… ì´ë¦„ (ì˜ˆ: "ì°½ì„¸ê¸°", "ìš”í•œë³µìŒ")
- `chapter`: ì¥ ë²ˆí˜¸ (ì–‘ì˜ ì •ìˆ˜)
- `verse`: ì ˆ ë²ˆí˜¸ (ì–‘ì˜ ì •ìˆ˜)
- `content`: ì „ì²´ ì„±ê²½ êµ¬ì ˆ í…ìŠ¤íŠ¸
- `reference`: í˜•ì‹í™”ëœ ë¬¸ìì—´ (ì˜ˆ: "ìš” 3:16")
- `isPremium`: í”„ë¦¬ë¯¸ì—„ ì „ìš© ì½˜í…ì¸  í”Œë˜ê·¸
- `category`: ì„ íƒì  ë¶„ë¥˜ (ì§€í˜œ, ì†Œë§, ë¯¿ìŒ ë“±)

---

### 3. PrayerNote

**íŒŒì¼**: `lib/features/prayer_note/domain/entities/prayer_note.dart`

```dart
@freezed
class PrayerNote with _$PrayerNote {
  const factory PrayerNote({
    required String id,
    required String userId,
    String? scriptureId,
    required String content,
    required DateTime createdAt,
    required DateTime updatedAt,
    // ì¡°ì¸ëœ ì„±ê²½ êµ¬ì ˆ ë°ì´í„° (ì„ íƒì )
    String? scriptureReference,
    String? scriptureContent,
  }) = _PrayerNote;
}
```

**ì†ì„±**:
- `id`: ê³ ìœ  ì‹ë³„ì
- `userId`: ê¸°ë„ ë…¸íŠ¸ ì†Œìœ ì
- `scriptureId`: ì„±ê²½ êµ¬ì ˆì— ëŒ€í•œ ì„ íƒì  ì°¸ì¡°
- `content`: ì‚¬ìš©ìì˜ ë¬µìƒ/ê¸°ë„ í…ìŠ¤íŠ¸
- `createdAt`: ìƒì„± íƒ€ì„ìŠ¤íƒ¬í”„
- `scriptureReference`: scriptures í…Œì´ë¸”ì—ì„œ ì¡°ì¸ëœ í•„ë“œ
- `scriptureContent`: scriptures í…Œì´ë¸”ì—ì„œ ì¡°ì¸ëœ í•„ë“œ

---

### 4. Subscription

**íŒŒì¼**: `lib/features/subscription/domain/entities/subscription.dart`

```dart
@freezed
class Subscription with _$Subscription {
  const factory Subscription({
    required String id,
    required String userId,
    required String productId,
    required SubscriptionPlatform platform,
    String? storeTransactionId,
    String? originalTransactionId,
    required SubscriptionStatus status,
    required DateTime startedAt,
    DateTime? expiresAt,
    @Default(true) bool autoRenew,
    String? cancellationReason,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _Subscription;
}

enum SubscriptionStatus {
  active,
  canceled,
  expired,
  pending,
  gracePeriod,
}

enum SubscriptionPlatform {
  ios,
  android,
  web,
}
```

---

### 5. SubscriptionProduct

```dart
@freezed
class SubscriptionProduct with _$SubscriptionProduct {
  const factory SubscriptionProduct({
    required String id,
    required String name,
    String? description,
    int? durationDays,
    required int priceKrw,
    double? priceUsd,
    String? iosProductId,
    String? androidProductId,
    @Default(true) bool isActive,
    required DateTime createdAt,
  }) = _SubscriptionProduct;
}
```

---

### 6. PurchaseResult

```dart
@freezed
class PurchaseResult with _$PurchaseResult {
  const factory PurchaseResult({
    required String productId,
    required String transactionId,
    String? originalTransactionId,
    required SubscriptionPlatform platform,
    String? receipt, // iOS
    String? purchaseToken, // Android
    required DateTime purchaseDate,
    required IAPPurchaseStatus status,
  }) = _PurchaseResult;
}

enum IAPPurchaseStatus {
  purchased,
  pending,
  restored,
  canceled,
  error,
}
```

---

## ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤

### 1. AuthRepository

**íŒŒì¼**: `lib/features/auth/data/auth_repository.dart`

**ë©”ì„œë“œ**:
```dart
class AuthRepository {
  User? get currentUser;
  bool get isLoggedIn;
  Stream<AuthState> get authStateChanges;

  Future<Either<String, User>> signInWithEmail({
    required String email,
    required String password,
  });

  Future<Either<String, User>> signUpWithEmail({
    required String email,
    required String password,
  });

  Future<Either<String, Unit>> signOut();
  Future<Either<String, Unit>> signInWithGoogle();
  Future<Either<String, Unit>> signInWithApple();
}
```

---

### 2. UserProfileRepository

**íŒŒì¼**: `lib/features/auth/data/user_profile_repository.dart`

**ë©”ì„œë“œ**:
```dart
class UserProfileRepository {
  Future<Either<String, UserProfile>> getUserProfile(String userId);

  Future<Either<String, UserTier>> getUserTier(String userId);

  Future<Either<String, UserProfile>> updateUserTier({
    required String userId,
    required UserTier tier,
  });

  Future<Either<String, UserProfile>> createUserProfile({
    required String userId,
    UserTier tier = UserTier.member,
  });
}
```

---

### 3. ScriptureRepository

**íŒŒì¼**: `lib/features/scripture/domain/repositories/scripture_repository.dart`

**ë©”ì„œë“œ**:
```dart
abstract class ScriptureRepository {
  /// ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¥¼ ìœ„í•œ ëœë¤ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸° (ì¤‘ë³µ í—ˆìš©)
  Future<Either<Failure, List<Scripture>>> getRandomScripture(int count);

  /// íšŒì› ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§¤ì¼ì˜ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸° (ì¤‘ë³µ ì—†ìŒ)
  Future<Either<Failure, List<Scripture>>> getDailyScriptures({
    required String userId,
    required int count,
  });

  /// í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìë¥¼ ìœ„í•œ í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, List<Scripture>>> getPremiumScriptures({
    required String userId,
    required int count,
  });

  /// ì‚¬ìš©ìê°€ ì„±ê²½ êµ¬ì ˆì„ ë´¤ìŒì„ ê¸°ë¡
  Future<Either<Failure, void>> recordScriptureView({
    required String userId,
    required String scriptureId,
  });

  /// íŠ¹ì • ë‚ ì§œì— ëŒ€í•œ ì‚¬ìš©ìì˜ ì„±ê²½ êµ¬ì ˆ ì¡°íšŒ ê¸°ë¡ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, List<Scripture>>> getScriptureHistory({
    required String userId,
    required DateTime date,
  });
}
```

**êµ¬í˜„**: `SupabaseScriptureRepository`
**í…ŒìŠ¤íŠ¸**: 17ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

---

### 4. PrayerNoteRepository

**íŒŒì¼**: `lib/features/prayer_note/domain/repositories/prayer_note_repository.dart`

**ë©”ì„œë“œ**:
```dart
abstract class PrayerNoteRepository {
  /// ìƒˆ ê¸°ë„ ë…¸íŠ¸ ìƒì„±
  Future<Either<Failure, PrayerNote>> createPrayerNote({
    required String userId,
    required String content,
    String? scriptureId,
  });

  /// ë‚ ì§œ ë²”ìœ„ì— ëŒ€í•œ ê¸°ë„ ë…¸íŠ¸ ê°€ì ¸ì˜¤ê¸° (ë“±ê¸‰ ê¸°ë°˜ í•„í„°ë§)
  Future<Either<Failure, List<PrayerNote>>> getPrayerNotes({
    required String userId,
    DateTime? startDate,
    DateTime? endDate,
  });

  /// íŠ¹ì • ë‚ ì§œì— ëŒ€í•œ ê¸°ë„ ë…¸íŠ¸ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, List<PrayerNote>>> getPrayerNotesByDate({
    required String userId,
    required DateTime date,
  });

  /// ê¸°ì¡´ ê¸°ë„ ë…¸íŠ¸ ì—…ë°ì´íŠ¸
  Future<Either<Failure, PrayerNote>> updatePrayerNote({
    required String noteId,
    required String content,
  });

  /// ê¸°ë„ ë…¸íŠ¸ ì‚­ì œ
  Future<Either<Failure, void>> deletePrayerNote({
    required String noteId,
  });

  /// ì‚¬ìš©ì ë“±ê¸‰ì— ë”°ë¼ ë‚ ì§œ ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
  /// íšŒì›: ìµœê·¼ 3ì¼ ì ‘ê·¼ ê°€ëŠ¥
  /// í”„ë¦¬ë¯¸ì—„: ëª¨ë“  ë‚ ì§œ ì ‘ê·¼ ê°€ëŠ¥
  Future<Either<Failure, bool>> isDateAccessible({
    required String userId,
    required DateTime date,
  });
}
```

**êµ¬í˜„**: `SupabasePrayerNoteRepository`
**í…ŒìŠ¤íŠ¸**: 23ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

---

### 5. SubscriptionRepository

**íŒŒì¼**: `lib/features/subscription/domain/repositories/subscription_repository.dart`

**ë©”ì„œë“œ**:
```dart
abstract class SubscriptionRepository {
  /// í˜„ì¬ ì‚¬ìš©ìì˜ êµ¬ë… ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, Subscription?>> getSubscriptionStatus({
    required String userId,
  });

  /// ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ë… ìƒí’ˆ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, List<SubscriptionProduct>>> getAvailableProducts({
    SubscriptionPlatform? platform,
  });

  /// ì„±ê³µì ì¸ êµ¬ë§¤ ê²€ì¦ í›„ êµ¬ë… í™œì„±í™”
  Future<Either<Failure, Subscription>> activateSubscription({
    required String userId,
    required String productId,
    required SubscriptionPlatform platform,
    required String transactionId,
    String? originalTransactionId,
  });

  /// í˜„ì¬ êµ¬ë… ì·¨ì†Œ (ë§Œë£Œì¼ê¹Œì§€ í™œì„± ìƒíƒœ ìœ ì§€)
  Future<Either<Failure, void>> cancelSubscription({
    required String userId,
    String? reason,
  });

  /// Appleê³¼ iOS ì˜ìˆ˜ì¦ ê²€ì¦
  Future<Either<Failure, Map<String, dynamic>>> verifyIosReceipt({
    required String receipt,
    required String userId,
  });

  /// Google Playì™€ Android êµ¬ë§¤ ê²€ì¦
  Future<Either<Failure, Map<String, dynamic>>> verifyAndroidPurchase({
    required String purchaseToken,
    required String productId,
    required String userId,
  });

  /// ì‚¬ìš©ìê°€ í™œì„± í”„ë¦¬ë¯¸ì—„ êµ¬ë…ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸
  Future<Either<Failure, bool>> hasActivePremium({
    required String userId,
  });
}
```

**êµ¬í˜„**: `SupabaseSubscriptionRepository`
**í…ŒìŠ¤íŠ¸**: 32ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

---

### 6. IAPService

**íŒŒì¼**: `lib/features/subscription/domain/services/iap_service.dart`

**ë©”ì„œë“œ**:
```dart
abstract class IAPService {
  /// IAP ì„œë¹„ìŠ¤ ì´ˆê¸°í™” (í”Œë«í¼ë³„)
  Future<Either<Failure, void>> initialize();

  /// ìŠ¤í† ì–´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒí’ˆ ê°€ì ¸ì˜¤ê¸°
  Future<Either<Failure, List<SubscriptionProduct>>> fetchProducts({
    required List<String> productIds,
  });

  /// êµ¬ë… ìƒí’ˆ êµ¬ë§¤
  Future<Either<Failure, PurchaseResult>> purchaseSubscription({
    required String productId,
  });

  /// ì´ì „ êµ¬ë§¤ ë³µì›
  Future<Either<Failure, List<PurchaseResult>>> restorePurchases();

  /// ë³´ë¥˜ ì¤‘ì¸ êµ¬ë§¤ ê°€ì ¸ì˜¤ê¸° (ë¯¸ì™„ë£Œ ê±°ë˜)
  Future<Either<Failure, List<PurchaseResult>>> getPendingPurchases();

  /// êµ¬ë§¤ ê±°ë˜ ì™„ë£Œ
  Future<Either<Failure, void>> completePurchase({
    required String transactionId,
  });

  /// ë¦¬ì†ŒìŠ¤ ë° ë¦¬ìŠ¤ë„ˆ í•´ì œ
  void dispose();
}
```

**êµ¬í˜„**: `IAPServiceImpl` (`in_app_purchase` íŒ¨í‚¤ì§€ ì‚¬ìš©, iOS/Android)
**í…ŒìŠ¤íŠ¸**: 7ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

---

## êµ¬í˜„ëœ ê¸°ëŠ¥

### 1ë‹¨ê³„: í™˜ê²½ ë° ì¸ì¦ âœ…

#### ê¸°ëŠ¥
1. **ì¸ì¦ ì‹œìŠ¤í…œ**
   - ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…
   - Google OAuth í†µí•©
   - Apple ë¡œê·¸ì¸ í†µí•©
   - Supabase Authë¥¼ ì‚¬ìš©í•œ ì„¸ì…˜ ê´€ë¦¬

2. **ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬**
   - íšŒì›ê°€ì… ì‹œ ìë™ í”„ë¡œí•„ ìƒì„±
   - ë“±ê¸‰ ê´€ë¦¬ (ê²ŒìŠ¤íŠ¸/íšŒì›/í”„ë¦¬ë¯¸ì—„)
   - í”„ë¡œí•„ ì¡°íšŒ ë° ì—…ë°ì´íŠ¸

3. **ì˜¨ë³´ë”© í”Œë¡œìš°**
   - ìë™ ë¡œê·¸ì¸ í™•ì¸ ê¸°ëŠ¥ì´ ìˆëŠ” ìŠ¤í”Œë˜ì‹œ í™”ë©´
   - ë¡œê·¸ì¸/íšŒì›ê°€ì… í™”ë©´
   - ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì˜¨ë³´ë”© íŒì—…

#### êµ¬í˜„ëœ íŒŒì¼
- `lib/features/auth/data/auth_repository.dart`
- `lib/features/auth/data/user_profile_repository.dart`
- `lib/features/auth/domain/user_profile.dart`
- `lib/features/auth/presentation/screens/splash_screen.dart`
- `lib/features/auth/presentation/screens/login_screen.dart`
- `lib/features/auth/presentation/widgets/onboarding_popup.dart`

#### í…ŒìŠ¤íŠ¸
- **AuthRepository**: 11ê°œ í…ŒìŠ¤íŠ¸
- **UserProfileRepository**: 13ê°œ í…ŒìŠ¤íŠ¸
- **ì´ê³„**: 24ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

---

### 2ë‹¨ê³„: ì„±ê²½ êµ¬ì ˆ ì „ë‹¬ ì‹œìŠ¤í…œ âœ…

#### ê¸°ëŠ¥
1. **ë“±ê¸‰ ê¸°ë°˜ ì„±ê²½ êµ¬ì ˆ ì „ë‹¬**
   - **ê²ŒìŠ¤íŠ¸**: í•˜ë£¨ 1ê°œ ëœë¤ ì„±ê²½ êµ¬ì ˆ (ì¤‘ë³µ í—ˆìš©)
   - **íšŒì›**: í•˜ë£¨ 3ê°œ ì„±ê²½ êµ¬ì ˆ (ì¤‘ë³µ ì—†ìŒ)
   - **í”„ë¦¬ë¯¸ì—„**: ì¼ë°˜ 3ê°œ + í”„ë¦¬ë¯¸ì—„ 3ê°œ ì„±ê²½ êµ¬ì ˆ/ì¼

2. **ì„±ê²½ êµ¬ì ˆ ì¹´ë“œ UI**
   - ì„±ê²½ êµ¬ì ˆ ë‚´ìš©ì´ ë‹´ê¸´ ì•„ë¦„ë‹¤ìš´ ì¹´ë“œ ë””ìì¸
   - ì°¸ì¡° í‘œì‹œ
   - ì¹´í…Œê³ ë¦¬ ë°°ì§€
   - ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

3. **ì¼ì¼ í”¼ë“œ í™”ë©´**
   - ìˆ˜ì§ ìŠ¤í¬ë¡¤ë§ PageView
   - í˜ì´ì§€ í‘œì‹œê¸°
   - í•œë„ ë„ë‹¬ ì‹œ ì½˜í…ì¸  ì°¨ë‹¨ê¸°

4. **ì¤‘ë³µ ë°©ì§€ ë¡œì§**
   - ì¡°íšŒ ê¸°ë¡ ì¶”ì 
   - ê·¸ë‚  ì´ë¯¸ ë³¸ ì„±ê²½ êµ¬ì ˆ ì œì™¸
   - JOIN ìµœì í™”ë¥¼ ì‚¬ìš©í•œ RPC í•¨ìˆ˜

#### êµ¬í˜„ëœ íŒŒì¼
- `lib/features/scripture/domain/entities/scripture.dart`
- `lib/features/scripture/domain/repositories/scripture_repository.dart`
- `lib/features/scripture/data/repositories/supabase_scripture_repository.dart`
- `lib/features/scripture/presentation/screens/daily_feed_screen.dart`
- `lib/features/scripture/presentation/widgets/scripture_card.dart`
- `lib/features/scripture/presentation/widgets/content_blocker.dart`
- `lib/features/scripture/presentation/widgets/page_indicator.dart`

#### ë°ì´í„°ë² ì´ìŠ¤
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 002**: `scriptures` í…Œì´ë¸” (23ê°œ ë ˆì½”ë“œ: ì¼ë°˜ 15ê°œ + í”„ë¦¬ë¯¸ì—„ 8ê°œ)
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 003**: `user_scripture_history` í…Œì´ë¸”
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 004**: 4ê°œ RPC í•¨ìˆ˜
- **pgTAP í…ŒìŠ¤íŠ¸**: 15ê°œ SQL í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸
- **ScriptureRepository**: 17ê°œ í…ŒìŠ¤íŠ¸
- **ScriptureCard ìœ„ì ¯**: 9ê°œ í…ŒìŠ¤íŠ¸
- **DailyFeedScreen ìœ„ì ¯**: 6ê°œ í…ŒìŠ¤íŠ¸
- **ContentBlocker ìœ„ì ¯**: 9ê°œ í…ŒìŠ¤íŠ¸
- **PageIndicator ìœ„ì ¯**: 4ê°œ í…ŒìŠ¤íŠ¸
- **pgTAP (SQL)**: 15ê°œ í…ŒìŠ¤íŠ¸
- **ì´ê³„**: 60ê°œ í…ŒìŠ¤íŠ¸

---

### 3ë‹¨ê³„: ê¸°ë„ ë…¸íŠ¸ ì‹œìŠ¤í…œ âœ…

#### ê¸°ëŠ¥
1. **ê¸°ë„ ë…¸íŠ¸ ìƒì„±**
   - ì—¬ëŸ¬ ì¤„ í…ìŠ¤íŠ¸ ì…ë ¥
   - ì„ íƒì  ì„±ê²½ êµ¬ì ˆ ì°¸ì¡°
   - Supabaseì— ì‹¤ì‹œê°„ ì €ì¥

2. **ìº˜ë¦°ë” ë·° (ë‚´ ì„œì¬)**
   - `table_calendar` í†µí•©
   - ë‚ ì§œ ê¸°ë°˜ ë…¸íŠ¸ í‘œì‹œ
   - ë“±ê¸‰ë³„ ì ê¸ˆ/í•´ì œ í‘œì‹œê¸°

3. **ë“±ê¸‰ ê¸°ë°˜ ì ‘ê·¼ ì œì–´**
   - **ê²ŒìŠ¤íŠ¸**: ë…¸íŠ¸ ì‘ì„± ë˜ëŠ” ë³´ê¸° ë¶ˆê°€
   - **íšŒì›**: ì‘ì„± ê°€ëŠ¥, ìµœê·¼ 3ì¼ë§Œ ë³´ê¸° ê°€ëŠ¥
   - **í”„ë¦¬ë¯¸ì—„**: ëª¨ë“  ë…¸íŠ¸ì— ë¬´ì œí•œ ì ‘ê·¼

4. **ìë™ ì •ë¦¬**
   - Edge Functionì´ 7ì¼ ì´ìƒ ëœ íšŒì› ë…¸íŠ¸ë¥¼ ì‚­ì œ
   - í”„ë¦¬ë¯¸ì—„ ë…¸íŠ¸ëŠ” ì˜êµ¬ ë³´ê´€

#### êµ¬í˜„ëœ íŒŒì¼
- `lib/features/prayer_note/domain/entities/prayer_note.dart`
- `lib/features/prayer_note/domain/repositories/prayer_note_repository.dart`
- `lib/features/prayer_note/data/repositories/supabase_prayer_note_repository.dart`
- `lib/features/prayer_note/presentation/screens/my_library_screen.dart`
- `lib/features/prayer_note/presentation/widgets/prayer_note_input.dart`
- `lib/features/prayer_note/presentation/widgets/prayer_note_card.dart`
- `lib/features/prayer_note/presentation/widgets/prayer_calendar.dart`
- `lib/features/prayer_note/presentation/widgets/date_accessibility_indicator.dart`

#### ë°ì´í„°ë² ì´ìŠ¤
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 006**: RLS ì •ì±…ì´ ì ìš©ëœ `prayer_notes` í…Œì´ë¸”
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 007**: 7ê°œ RPC í•¨ìˆ˜ (CRUD + ìœ í‹¸ë¦¬í‹°)
- **Edge Function**: `cleanup-old-notes` (ë§¤ì¼ ì˜ˆì•½ ì‹¤í–‰)
- **pgTAP í…ŒìŠ¤íŠ¸**: 20ê°œ SQL í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸
- **PrayerNoteRepository**: 23ê°œ í…ŒìŠ¤íŠ¸
- **MyLibraryScreen ìœ„ì ¯**: 6ê°œ í…ŒìŠ¤íŠ¸
- **PrayerNoteInput ìœ„ì ¯**: 9ê°œ í…ŒìŠ¤íŠ¸
- **PrayerNoteCard ìœ„ì ¯**: 10ê°œ í…ŒìŠ¤íŠ¸
- **PrayerCalendar ìœ„ì ¯**: 5ê°œ í…ŒìŠ¤íŠ¸
- **DateAccessibilityIndicator ìœ„ì ¯**: 6ê°œ í…ŒìŠ¤íŠ¸
- **ì´ê³„**: 59ê°œ í…ŒìŠ¤íŠ¸

---

### 4ë‹¨ê³„: ìˆ˜ìµí™” (70% ì™„ë£Œ) ğŸ”„

#### êµ¬í˜„ëœ ê¸°ëŠ¥ (4-1 & 4-2)

**4-1. ë°ì´í„°ë² ì´ìŠ¤ ë° êµ¬ë… ìŠ¤í‚¤ë§ˆ** âœ…
1. **êµ¬ë… í…Œì´ë¸”**
   - í¬ê´„ì ì¸ ìƒíƒœ ì¶”ì  ê¸°ëŠ¥ì´ ìˆëŠ” `user_subscriptions` í…Œì´ë¸”
   - ê°€ê²© ì •ë³´ê°€ í¬í•¨ëœ `subscription_products` í…Œì´ë¸”
   - ë³´ì•ˆì„ ìœ„í•œ RLS ì •ì±…

2. **RPC í•¨ìˆ˜** (5ê°œ í•¨ìˆ˜)
   - `get_subscription_status`
   - `activate_subscription`
   - `cancel_subscription`
   - `get_available_products`
   - `has_active_premium`

3. **Edge í•¨ìˆ˜** (4ê°œ í•¨ìˆ˜)
   - `verify-ios-receipt`: Apple ì˜ìˆ˜ì¦ ê²€ì¦
   - `verify-android-receipt`: Google Play êµ¬ë§¤ ê²€ì¦
   - `subscription-webhook`: ìŠ¤í† ì–´ ì•Œë¦¼ ì²˜ë¦¬
   - `check-expired-subscriptions`: ë§Œë£Œ í™•ì¸ì„ ìœ„í•œ í¬ë¡  ì¡

**4-2. êµ¬ë… ê¸°ëŠ¥ (TDD)** âœ…
1. **ë„ë©”ì¸ ë ˆì´ì–´**
   - Subscription, SubscriptionProduct, PurchaseResult ì—”í‹°í‹°
   - SubscriptionRepository ì¸í„°í˜ì´ìŠ¤ (7ê°œ ë©”ì„œë“œ)
   - IAPService ì¸í„°í˜ì´ìŠ¤ (7ê°œ ë©”ì„œë“œ)

2. **ë°ì´í„° ë ˆì´ì–´**
   - SupabaseSubscriptionRepository êµ¬í˜„
   - iOS/Androidìš© IAPServiceImpl (`in_app_purchase` íŒ¨í‚¤ì§€ ì‚¬ìš©)

3. **ìƒíƒœ ë ˆì´ì–´ (Riverpod í”„ë¡œë°”ì´ë”)**
   - `subscriptionStatusProvider`: í˜„ì¬ êµ¬ë… ë¡œë“œ
   - `availableProductsProvider`: ìŠ¤í† ì–´ì—ì„œ ìƒí’ˆ ê°€ì ¸ì˜¤ê¸°
   - `purchaseControllerProvider`: êµ¬ë§¤ í”Œë¡œìš° ì²˜ë¦¬
   - `restorePurchaseControllerProvider`: ì´ì „ êµ¬ë§¤ ë³µì›
   - `hasPremiumProvider`: í”„ë¦¬ë¯¸ì—„ ì ‘ê·¼ ê¶Œí•œ Boolean í™•ì¸

#### êµ¬í˜„ëœ íŒŒì¼
- `lib/features/subscription/domain/entities/subscription.dart`
- `lib/features/subscription/domain/repositories/subscription_repository.dart`
- `lib/features/subscription/domain/services/iap_service.dart`
- `lib/features/subscription/data/repositories/supabase_subscription_repository.dart`
- `lib/features/subscription/data/services/iap_service_impl.dart`
- `lib/features/subscription/presentation/providers/subscription_providers.dart`

#### ë°ì´í„°ë² ì´ìŠ¤
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 008**: `user_subscriptions` ë° `subscription_products` í…Œì´ë¸”
- **ë§ˆì´ê·¸ë ˆì´ì…˜ 009**: 5ê°œ RPC í•¨ìˆ˜
- **Edge í•¨ìˆ˜**: 4ê°œ TypeScript/Deno í•¨ìˆ˜
- **pgTAP í…ŒìŠ¤íŠ¸**: 25ê°œ SQL í…ŒìŠ¤íŠ¸

#### í…ŒìŠ¤íŠ¸
- **SubscriptionRepository**: 32ê°œ í…ŒìŠ¤íŠ¸
- **IAPService**: 7ê°œ í…ŒìŠ¤íŠ¸
- **SubscriptionProviders**: 16ê°œ í…ŒìŠ¤íŠ¸
- **pgTAP (SQL)**: 25ê°œ í…ŒìŠ¤íŠ¸
- **ì´ê³„**: 55ê°œ í…ŒìŠ¤íŠ¸ (UI í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘)

#### ëŒ€ê¸° ì¤‘ì¸ ê¸°ëŠ¥ (4-3)
- PremiumLandingScreen UI
- ManageSubscriptionScreen UI
- SubscriptionProductCard ìœ„ì ¯
- PurchaseButton ìœ„ì ¯
- UpsellDialog ìœ„ì ¯
- Scripture Feed ë° Prayer Archiveì™€ í†µí•©
- iOS/Android êµ¬ë§¤ í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ**: 26ê°œ ì¶”ê°€ ìœ„ì ¯/í†µí•© í…ŒìŠ¤íŠ¸

---

## ìƒíƒœ ê´€ë¦¬

### Riverpod í”„ë¡œë°”ì´ë”

#### ì¸ì¦ í”„ë¡œë°”ì´ë”

**íŒŒì¼**: `lib/features/auth/providers/auth_providers.dart`

```dart
// í•µì‹¬ í”„ë¡œë°”ì´ë”
final authRepositoryProvider = Provider<AuthRepository>((ref) {...});
final userProfileRepositoryProvider = Provider<UserProfileRepository>((ref) {...});

// ìƒíƒœ í”„ë¡œë°”ì´ë”
final currentUserProvider = StreamProvider<User?>((ref) {...});
final authStateProvider = StreamProvider<AuthState>((ref) {...});

// ì‚¬ìš©ì í”„ë¡œí•„ í”„ë¡œë°”ì´ë”
final currentUserProfileProvider = FutureProvider<UserProfile?>((ref) async {...});
final currentUserTierProvider = FutureProvider<UserTier>((ref) async {...});
```

**ì‚¬ìš©ë²•**:
```dart
// ìœ„ì ¯ì—ì„œ
final userTier = ref.watch(currentUserTierProvider);
userTier.when(
  data: (tier) => Text('ë“±ê¸‰: $tier'),
  loading: () => CircularProgressIndicator(),
  error: (err, stack) => Text('ì˜¤ë¥˜: $err'),
);
```

---

#### ì„±ê²½ êµ¬ì ˆ í”„ë¡œë°”ì´ë”

**íŒŒì¼**: `lib/features/scripture/presentation/providers/scripture_providers.dart`

```dart
// ë¦¬í¬ì§€í† ë¦¬ í”„ë¡œë°”ì´ë”
final scriptureRepositoryProvider = Provider<ScriptureRepository>((ref) {...});

// ë§¤ì¼ì˜ ì„±ê²½ êµ¬ì ˆ (ë“±ê¸‰ ê¸°ë°˜)
final dailyScripturesProvider = FutureProvider<List<Scripture>>((ref) async {
  final user = ref.watch(currentUserProvider).value;
  final tier = await ref.watch(currentUserTierProvider.future);
  final repository = ref.watch(scriptureRepositoryProvider);

  if (tier == UserTier.guest) {
    return repository.getRandomScripture(1);
  } else {
    return repository.getDailyScriptures(userId: user!.id, count: 3);
  }
});

// í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ (í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì ì „ìš©)
final premiumScripturesProvider = FutureProvider<List<Scripture>>((ref) async {...});

// ì„±ê²½ êµ¬ì ˆ ì¡°íšŒ ì¶”ì ê¸°
final scriptureViewTrackerProvider = Provider((ref) {
  return ScriptureViewTracker(ref.watch(scriptureRepositoryProvider));
});
```

---

#### ê¸°ë„ ë…¸íŠ¸ í”„ë¡œë°”ì´ë”

**íŒŒì¼**: `lib/features/prayer_note/presentation/providers/prayer_note_providers.dart`

```dart
// ë¦¬í¬ì§€í† ë¦¬ í”„ë¡œë°”ì´ë”
final prayerNoteRepositoryProvider = Provider<PrayerNoteRepository>((ref) {...});

// ê¸°ë„ ë…¸íŠ¸ ëª©ë¡ (ìë™ ìƒˆë¡œê³ ì¹¨)
final prayerNotesProvider = StreamProvider.family<List<PrayerNote>, DateTime>(
  (ref, date) {
    final userId = ref.watch(currentUserProvider).value!.id;
    return ref.watch(prayerNoteRepositoryProvider)
      .getPrayerNotesByDate(userId: userId, date: date);
  }
);

// ë‚ ì§œ ì ‘ê·¼ì„± ê²€ì‚¬ê¸°
final dateAccessibilityProvider = FutureProvider.family<bool, DateTime>(
  (ref, date) async {
    final userId = ref.watch(currentUserProvider).value!.id;
    final result = await ref.watch(prayerNoteRepositoryProvider)
      .isDateAccessible(userId: userId, date: date);
    return result.fold((l) => false, (r) => r);
  }
);

// ë…¸íŠ¸ ìƒì„± ì»¨íŠ¸ë¡¤ëŸ¬
final createPrayerNoteProvider = StateNotifierProvider<CreatePrayerNoteNotifier, AsyncValue<PrayerNote?>>(
  (ref) => CreatePrayerNoteNotifier(ref.watch(prayerNoteRepositoryProvider))
);
```

---

#### êµ¬ë… í”„ë¡œë°”ì´ë”

**íŒŒì¼**: `lib/features/subscription/presentation/providers/subscription_providers.dart`

```dart
// ë¦¬í¬ì§€í† ë¦¬ ë° ì„œë¹„ìŠ¤ í”„ë¡œë°”ì´ë”
final subscriptionRepositoryProvider = Provider<SubscriptionRepository>((ref) {...});
final iapServiceProvider = Provider<IAPService>((ref) {...});

// êµ¬ë… ìƒíƒœ
final subscriptionStatusProvider = FutureProvider<Subscription?>((ref) async {
  final userId = ref.watch(currentUserProvider).value?.id;
  if (userId == null) return null;

  final result = await ref.watch(subscriptionRepositoryProvider)
    .getSubscriptionStatus(userId: userId);
  return result.fold((l) => null, (r) => r);
});

// ì‚¬ìš© ê°€ëŠ¥í•œ ìƒí’ˆ
final availableProductsProvider = FutureProvider<List<SubscriptionProduct>>((ref) async {
  final result = await ref.watch(subscriptionRepositoryProvider)
    .getAvailableProducts();
  return result.fold((l) => [], (r) => r);
});

// í”„ë¦¬ë¯¸ì—„ ì—¬ë¶€ (boolean)
final hasPremiumProvider = FutureProvider<bool>((ref) async {
  final userId = ref.watch(currentUserProvider).value?.id;
  if (userId == null) return false;

  final result = await ref.watch(subscriptionRepositoryProvider)
    .hasActivePremium(userId: userId);
  return result.fold((l) => false, (r) => r);
});

// êµ¬ë§¤ ì»¨íŠ¸ë¡¤ëŸ¬
final purchaseControllerProvider = StateNotifierProvider<PurchaseController, AsyncValue<PurchaseResult?>>(
  (ref) => PurchaseController(
    ref.watch(iapServiceProvider),
    ref.watch(subscriptionRepositoryProvider),
  )
);

// êµ¬ë§¤ ë³µì› ì»¨íŠ¸ë¡¤ëŸ¬
final restorePurchaseControllerProvider = StateNotifierProvider<RestorePurchaseController, AsyncValue<List<PurchaseResult>>>(
  (ref) => RestorePurchaseController(
    ref.watch(iapServiceProvider),
    ref.watch(subscriptionRepositoryProvider),
  )
);
```

---

## í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

### í…ŒìŠ¤íŠ¸ í†µê³„

| ì¹´í…Œê³ ë¦¬ | í…ŒìŠ¤íŠ¸ íŒŒì¼ | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | ìƒíƒœ |
|----------|------------|------------|--------|
| **ì¸ì¦** | 5 | 24 | âœ… í†µê³¼ |
| **ì„±ê²½ êµ¬ì ˆ** | 5 + 1 SQL | 60 (Dart 45 + pgTAP 15) | âœ… í†µê³¼ |
| **ê¸°ë„ ë…¸íŠ¸** | 6 + 1 SQL | 59 (Dart 39 + pgTAP 20) | âœ… í†µê³¼ |
| **êµ¬ë…** | 3 + 1 SQL | 55 (Dart 55 + pgTAP 25) | âœ… í†µê³¼ |
| **ì´ê³„** | 20 | 198 | âœ… í†µê³¼ |

### ë ˆì´ì–´ë³„ ì»¤ë²„ë¦¬ì§€

| ë ˆì´ì–´ | ëª©í‘œ | í˜„ì¬ |
|-------|--------|---------|
| ë¦¬í¬ì§€í† ë¦¬ | 95%+ | ~95% |
| ì„œë¹„ìŠ¤ | 95%+ | ~95% |
| í”„ë¡œë°”ì´ë” | 90%+ | ~90% |
| ìœ„ì ¯ | 80%+ | ~85% |
| ìŠ¤í¬ë¦° | 70%+ | ~70% |

### í…ŒìŠ¤íŠ¸ íŒŒì¼

#### 1ë‹¨ê³„: ì¸ì¦
```
test/features/auth/
â”œâ”€â”€ auth_repository_test.dart (11ê°œ í…ŒìŠ¤íŠ¸)
â”œâ”€â”€ user_profile_repository_test.dart (13ê°œ í…ŒìŠ¤íŠ¸)
â””â”€â”€ presentation/
    â”œâ”€â”€ splash_screen_test.dart
    â”œâ”€â”€ login_screen_test.dart
    â””â”€â”€ onboarding_popup_test.dart
```

#### 2ë‹¨ê³„: ì„±ê²½ êµ¬ì ˆ
```
test/features/scripture/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ scripture_repository_test.dart (17ê°œ í…ŒìŠ¤íŠ¸)
â””â”€â”€ presentation/
    â”œâ”€â”€ screens/
    â”‚   â””â”€â”€ daily_feed_screen_test.dart (6ê°œ í…ŒìŠ¤íŠ¸)
    â””â”€â”€ widgets/
        â”œâ”€â”€ scripture_card_test.dart (9ê°œ í…ŒìŠ¤íŠ¸)
        â”œâ”€â”€ content_blocker_test.dart (9ê°œ í…ŒìŠ¤íŠ¸)
        â””â”€â”€ page_indicator_test.dart (4ê°œ í…ŒìŠ¤íŠ¸)

supabase/tests/
â””â”€â”€ scripture_rpc_test.sql (15ê°œ pgTAP í…ŒìŠ¤íŠ¸)
```

#### 3ë‹¨ê³„: ê¸°ë„ ë…¸íŠ¸
```
test/features/prayer_note/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ prayer_note_repository_test.dart (23ê°œ í…ŒìŠ¤íŠ¸)
â””â”€â”€ presentation/
    â”œâ”€â”€ screens/
    â”‚   â””â”€â”€ my_library_screen_test.dart (6ê°œ í…ŒìŠ¤íŠ¸)
    â””â”€â”€ widgets/
        â”œâ”€â”€ prayer_note_input_test.dart (9ê°œ í…ŒìŠ¤íŠ¸)
        â”œâ”€â”€ prayer_note_card_test.dart (10ê°œ í…ŒìŠ¤íŠ¸)
        â”œâ”€â”€ prayer_calendar_test.dart (5ê°œ í…ŒìŠ¤íŠ¸)
        â””â”€â”€ date_accessibility_indicator_test.dart (6ê°œ í…ŒìŠ¤íŠ¸)

supabase/tests/
â””â”€â”€ prayer_note_test.sql (20ê°œ pgTAP í…ŒìŠ¤íŠ¸)
```

#### 4ë‹¨ê³„: êµ¬ë…
```
test/features/subscription/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ subscription_repository_test.dart (32ê°œ í…ŒìŠ¤íŠ¸)
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ iap_service_test.dart (7ê°œ í…ŒìŠ¤íŠ¸)
â””â”€â”€ presentation/
    â””â”€â”€ providers/
        â””â”€â”€ subscription_providers_test.dart (16ê°œ í…ŒìŠ¤íŠ¸)

supabase/tests/
â””â”€â”€ subscription_test.sql (25ê°œ pgTAP í…ŒìŠ¤íŠ¸)
```

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ëª¨ë“  Dart í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# ì»¤ë²„ë¦¬ì§€ì™€ í•¨ê»˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test --coverage

# íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test test/features/auth/
flutter test test/features/scripture/
flutter test test/features/prayer_note/
flutter test test/features/subscription/

# pgTAP í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Supabase)
cd supabase
supabase test db
```

---

## íŒŒì¼ êµ¬ì¡°

```
severalbible/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ errors/
â”‚   â”‚   â”‚   â””â”€â”€ failures.dart
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â””â”€â”€ app_router.dart
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ supabase_service.dart
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚
â”‚   â””â”€â”€ features/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ user_profile.dart
â”‚       â”‚   â”‚   â””â”€â”€ user_tier.dart
â”‚       â”‚   â”œâ”€â”€ data/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth_repository.dart
â”‚       â”‚   â”‚   â”œâ”€â”€ user_profile_repository.dart
â”‚       â”‚   â”‚   â””â”€â”€ user_profile_data_source.dart
â”‚       â”‚   â”œâ”€â”€ providers/
â”‚       â”‚   â”‚   â””â”€â”€ auth_providers.dart
â”‚       â”‚   â””â”€â”€ presentation/
â”‚       â”‚       â”œâ”€â”€ screens/
â”‚       â”‚       â”‚   â”œâ”€â”€ splash_screen.dart
â”‚       â”‚       â”‚   â”œâ”€â”€ login_screen.dart
â”‚       â”‚       â”‚   â””â”€â”€ home_screen.dart
â”‚       â”‚       â””â”€â”€ widgets/
â”‚       â”‚           â””â”€â”€ onboarding_popup.dart
â”‚       â”‚
â”‚       â”œâ”€â”€ scripture/
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ entities/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ scripture.dart
â”‚       â”‚   â”‚   â””â”€â”€ repositories/
â”‚       â”‚   â”‚       â””â”€â”€ scripture_repository.dart
â”‚       â”‚   â”œâ”€â”€ data/
â”‚       â”‚   â”‚   â”œâ”€â”€ datasources/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ scripture_datasource.dart
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ supabase_scripture_datasource.dart
â”‚       â”‚   â”‚   â””â”€â”€ repositories/
â”‚       â”‚   â”‚       â””â”€â”€ supabase_scripture_repository.dart
â”‚       â”‚   â””â”€â”€ presentation/
â”‚       â”‚       â”œâ”€â”€ providers/
â”‚       â”‚       â”‚   â””â”€â”€ scripture_providers.dart
â”‚       â”‚       â”œâ”€â”€ screens/
â”‚       â”‚       â”‚   â””â”€â”€ daily_feed_screen.dart
â”‚       â”‚       â””â”€â”€ widgets/
â”‚       â”‚           â”œâ”€â”€ scripture_card.dart
â”‚       â”‚           â”œâ”€â”€ content_blocker.dart
â”‚       â”‚           â””â”€â”€ page_indicator.dart
â”‚       â”‚
â”‚       â”œâ”€â”€ prayer_note/
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”‚   â”œâ”€â”€ entities/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ prayer_note.dart
â”‚       â”‚   â”‚   â””â”€â”€ repositories/
â”‚       â”‚   â”‚       â””â”€â”€ prayer_note_repository.dart
â”‚       â”‚   â”œâ”€â”€ data/
â”‚       â”‚   â”‚   â”œâ”€â”€ datasources/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ prayer_note_datasource.dart
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ supabase_prayer_note_datasource.dart
â”‚       â”‚   â”‚   â””â”€â”€ repositories/
â”‚       â”‚   â”‚       â””â”€â”€ supabase_prayer_note_repository.dart
â”‚       â”‚   â””â”€â”€ presentation/
â”‚       â”‚       â”œâ”€â”€ providers/
â”‚       â”‚       â”‚   â””â”€â”€ prayer_note_providers.dart
â”‚       â”‚       â”œâ”€â”€ screens/
â”‚       â”‚       â”‚   â””â”€â”€ my_library_screen.dart
â”‚       â”‚       â””â”€â”€ widgets/
â”‚       â”‚           â”œâ”€â”€ prayer_note_input.dart
â”‚       â”‚           â”œâ”€â”€ prayer_note_card.dart
â”‚       â”‚           â”œâ”€â”€ prayer_calendar.dart
â”‚       â”‚           â””â”€â”€ date_accessibility_indicator.dart
â”‚       â”‚
â”‚       â””â”€â”€ subscription/
â”‚           â”œâ”€â”€ domain/
â”‚           â”‚   â”œâ”€â”€ entities/
â”‚           â”‚   â”‚   â””â”€â”€ subscription.dart
â”‚           â”‚   â”œâ”€â”€ repositories/
â”‚           â”‚   â”‚   â””â”€â”€ subscription_repository.dart
â”‚           â”‚   â””â”€â”€ services/
â”‚           â”‚       â””â”€â”€ iap_service.dart
â”‚           â”œâ”€â”€ data/
â”‚           â”‚   â”œâ”€â”€ datasources/
â”‚           â”‚   â”‚   â”œâ”€â”€ subscription_datasource.dart
â”‚           â”‚   â”‚   â””â”€â”€ supabase_subscription_datasource.dart
â”‚           â”‚   â”œâ”€â”€ repositories/
â”‚           â”‚   â”‚   â””â”€â”€ supabase_subscription_repository.dart
â”‚           â”‚   â””â”€â”€ services/
â”‚           â”‚       â””â”€â”€ iap_service_impl.dart
â”‚           â””â”€â”€ presentation/
â”‚               â””â”€â”€ providers/
â”‚                   â””â”€â”€ subscription_providers.dart
â”‚
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ scripture/
â”‚   â”‚   â”œâ”€â”€ prayer_note/
â”‚   â”‚   â””â”€â”€ subscription/
â”‚   â””â”€â”€ widget_test.dart
â”‚
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ 001_create_user_profiles.sql
â”‚   â”‚   â”œâ”€â”€ 002_create_scriptures.sql
â”‚   â”‚   â”œâ”€â”€ 003_create_user_scripture_history.sql
â”‚   â”‚   â”œâ”€â”€ 004_create_scripture_rpc_functions.sql
â”‚   â”‚   â”œâ”€â”€ 005_insert_scripture_dummy_data.sql
â”‚   â”‚   â”œâ”€â”€ 006_create_prayer_notes.sql
â”‚   â”‚   â”œâ”€â”€ 007_create_prayer_note_rpc_functions.sql
â”‚   â”‚   â”œâ”€â”€ 008_create_user_subscriptions.sql
â”‚   â”‚   â””â”€â”€ 009_create_subscription_rpc_functions.sql
â”‚   â”œâ”€â”€ functions/
â”‚   â”‚   â”œâ”€â”€ verify-ios-receipt/
â”‚   â”‚   â”œâ”€â”€ verify-android-receipt/
â”‚   â”‚   â”œâ”€â”€ subscription-webhook/
â”‚   â”‚   â”œâ”€â”€ check-expired-subscriptions/
â”‚   â”‚   â””â”€â”€ cleanup-old-notes/
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ scripture_rpc_test.sql
â”‚       â”œâ”€â”€ prayer_note_test.sql
â”‚       â””â”€â”€ subscription_test.sql
â”‚
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ CLAUDE.md
â”œâ”€â”€ PLANNER.md
â”œâ”€â”€ SPEC.md (ì´ íŒŒì¼)
â””â”€â”€ README.md
```

**ì´ Dart íŒŒì¼ ìˆ˜**: 51
**ì´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìˆ˜**: 20
**ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜**: 9
**ì´ Edge í•¨ìˆ˜ ìˆ˜**: 5

---

## API ë¬¸ì„œ

### Supabase RPC í•¨ìˆ˜

#### ì„±ê²½ êµ¬ì ˆ API

##### 1. get_random_scripture

**ëª©ì **: ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¥¼ ìœ„í•´ ëœë¤ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸° (ì¤‘ë³µ í—ˆìš©)

**ì„œëª…**:
```sql
get_random_scripture(p_count INTEGER DEFAULT 1)
RETURNS TABLE (
  id UUID,
  book TEXT,
  chapter INTEGER,
  verse INTEGER,
  content TEXT,
  reference TEXT,
  is_premium BOOLEAN,
  category TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
)
```

**ì‚¬ìš©ë²•**:
```dart
final result = await supabase
  .rpc('get_random_scripture', params: {'p_count': 1});
```

---

##### 2. get_daily_scriptures

**ëª©ì **: íšŒì› ì‚¬ìš©ìë¥¼ ìœ„í•´ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸°

**ì„œëª…**:
```sql
get_daily_scriptures(
  p_user_id UUID,
  p_count INTEGER DEFAULT 3
)
RETURNS TABLE (...)
```

**ë¡œì§**:
- ì˜¤ëŠ˜ ì´ë¯¸ ë³¸ ì„±ê²½ êµ¬ì ˆ ì œì™¸
- í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ ì œì™¸
- ë‚¨ì€ í’€ì—ì„œ ëœë¤ ì„ íƒ

**ì‚¬ìš©ë²•**:
```dart
final result = await supabase.rpc('get_daily_scriptures', params: {
  'p_user_id': userId,
  'p_count': 3,
});
```

---

##### 3. get_premium_scriptures

**ëª©ì **: í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ìë¥¼ ìœ„í•´ í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸°

**ì„œëª…**:
```sql
get_premium_scriptures(
  p_user_id UUID,
  p_count INTEGER DEFAULT 3
)
RETURNS TABLE (...)
```

**ë¡œì§**:
- `is_premium = true`ì¸ ì„±ê²½ êµ¬ì ˆë§Œ ë°˜í™˜
- ì˜¤ëŠ˜ ì´ë¯¸ ë³¸ í”„ë¦¬ë¯¸ì—„ ì„±ê²½ êµ¬ì ˆ ì œì™¸
- í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰ í•„ìš” (ì•± ë¡œì§ì—ì„œ ê°•ì œ)

---

##### 4. record_scripture_view

**ëª©ì **: ì‚¬ìš©ìê°€ ì„±ê²½ êµ¬ì ˆì„ ë´¤ìŒì„ ê¸°ë¡

**ì„œëª…**:
```sql
record_scripture_view(
  p_user_id UUID,
  p_scripture_id UUID
)
RETURNS VOID
```

**ì‚¬ìš©ë²•**:
```dart
await supabase.rpc('record_scripture_view', params: {
  'p_user_id': userId,
  'p_scripture_id': scriptureId,
});
```

---

#### ê¸°ë„ ë…¸íŠ¸ API

##### 1. create_prayer_note

**ì„œëª…**:
```sql
create_prayer_note(
  p_user_id UUID,
  p_content TEXT,
  p_scripture_id UUID DEFAULT NULL
)
RETURNS UUID
```

**ë°˜í™˜**: ìƒˆë¡œ ìƒì„±ëœ ê¸°ë„ ë…¸íŠ¸ì˜ ID

---

##### 2. get_prayer_notes_by_date

**ì„œëª…**:
```sql
get_prayer_notes_by_date(
  p_user_id UUID,
  p_date DATE
)
RETURNS TABLE (
  id UUID,
  user_id UUID,
  scripture_id UUID,
  content TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ,
  scripture_reference TEXT,
  scripture_content TEXT
)
```

**ì°¸ê³ **:
- `scripture_id`ê°€ ìˆëŠ” ê²½ìš° scriptures í…Œì´ë¸”ê³¼ ì¡°ì¸
- RLSê°€ ìë™ìœ¼ë¡œ ë“±ê¸‰ ê¸°ë°˜ í•„í„°ë§ ì ìš©

---

##### 3. is_date_accessible

**ì„œëª…**:
```sql
is_date_accessible(
  p_user_id UUID,
  p_date DATE
)
RETURNS BOOLEAN
```

**ë¡œì§**:
```sql
-- íšŒì› ë“±ê¸‰: ë‚ ì§œê°€ ìµœê·¼ 3ì¼ ì´ë‚´ì¸ ê²½ìš° ì ‘ê·¼ ê°€ëŠ¥
-- í”„ë¦¬ë¯¸ì—„ ë“±ê¸‰: í•­ìƒ ì ‘ê·¼ ê°€ëŠ¥
-- ê²ŒìŠ¤íŠ¸ ë“±ê¸‰: ì ‘ê·¼ ë¶ˆê°€
```

---

#### êµ¬ë… API

##### 1. get_subscription_status

**ì„œëª…**:
```sql
get_subscription_status(p_user_id UUID DEFAULT auth.uid())
RETURNS TABLE (
  subscription_id UUID,
  product_id TEXT,
  status TEXT,
  expires_at TIMESTAMPTZ,
  is_active BOOLEAN
)
```

**ë°˜í™˜**: ê³„ì‚°ëœ `is_active` í•„ë“œê°€ í¬í•¨ëœ í˜„ì¬ êµ¬ë…

---

##### 2. activate_subscription

**ì„œëª…**:
```sql
activate_subscription(
  p_user_id UUID,
  p_product_id TEXT,
  p_platform TEXT,
  p_transaction_id TEXT,
  p_original_transaction_id TEXT DEFAULT NULL
)
RETURNS JSON
```

**ë¶€ìˆ˜ íš¨ê³¼**:
- `user_subscriptions` í…Œì´ë¸” ì‚½ì… ë˜ëŠ” ì—…ë°ì´íŠ¸
- `user_profiles.tier`ë¥¼ 'premium'ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- ìƒí’ˆ ê¸°ê°„ì— ë”°ë¼ `expires_at` ê³„ì‚°

**ë°˜í™˜**:
```json
{
  "subscription_id": "uuid",
  "expires_at": "2025-02-15T12:00:00Z",
  "status": "success"
}
```

---

##### 3. has_active_premium

**ì„œëª…**:
```sql
has_active_premium(p_user_id UUID)
RETURNS BOOLEAN
```

**ë¡œì§**:
```sql
SELECT EXISTS (
  SELECT 1 FROM user_subscriptions
  WHERE user_id = p_user_id
    AND subscription_status = 'active'
    AND (expires_at IS NULL OR expires_at > NOW())
)
```

---

### Flutter ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œ

ëª¨ë“  ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œëŠ” ëª…ì‹œì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ `Either<Failure, T>` íƒ€ì…ì„ ë°˜í™˜í•©ë‹ˆë‹¤:

**ì˜ˆì‹œ**:
```dart
final result = await scriptureRepository.getDailyScriptures(
  userId: userId,
  count: 3,
);

result.fold(
  (failure) => print('ì˜¤ë¥˜: ${failure.message}'),
  (scriptures) => print('ì„±ê³µ: ${scriptures.length}ê°œ ì„±ê²½ êµ¬ì ˆ'),
);
```

**ì‹¤íŒ¨ íƒ€ì…**:
```dart
abstract class Failure {
  final String message;
}

class DatabaseFailure extends Failure {...}
class NetworkFailure extends Failure {...}
class CacheFailure extends Failure {...}
class ServerFailure extends Failure {...}
```

---

## í–¥í›„ ë¡œë“œë§µ

### 5ë‹¨ê³„: ìµœì í™” ë° ì¶œì‹œ (ëŒ€ê¸° ì¤‘)

**ëª©í‘œ**:
1. ì„±ëŠ¥ ìµœì í™”
2. ì˜¤í”„ë¼ì¸ ì§€ì› (ì„ íƒ ì‚¬í•­)
3. ì•± ìŠ¤í† ì–´ ì¤€ë¹„
4. QA ë° ë²„ê·¸ ìˆ˜ì •

**ì‘ì—…**:
- `cached_network_image`ë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ìºì‹±
- ListView ì§€ì—° ë¡œë”© ìµœì í™”
- Hiveë¥¼ ì‚¬ìš©í•œ ì˜¤í”„ë¼ì¸ ì„±ê²½ êµ¬ì ˆ ìºì‹± (ì„ íƒ ì‚¬í•­)
- ì•± ì•„ì´ì½˜ ë° ìŠ¤í”Œë˜ì‹œ í™”ë©´ ë””ìì¸
- ìŠ¤í† ì–´ ìŠ¤í¬ë¦°ìƒ· ë° ì„¤ëª…
- ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë° ì„œë¹„ìŠ¤ ì•½ê´€
- TestFlight/Google Play ë‚´ë¶€ í…ŒìŠ¤íŠ¸
- ìµœì¢… QA ë° ë²„ê·¸ ìˆ˜ì •

**ì˜ˆìƒ ê¸°ê°„**: 2-3ì£¼

---

### 4-3ë‹¨ê³„ ì™„ë£Œ (ë‹¤ìŒ ìš°ì„ ìˆœìœ„)

**ë‚¨ì€ UI ì‘ì—…**:
1. PremiumLandingScreen (7ê°œ ìœ„ì ¯ í…ŒìŠ¤íŠ¸)
2. ManageSubscriptionScreen (6ê°œ ìœ„ì ¯ í…ŒìŠ¤íŠ¸)
3. SubscriptionProductCard ìœ„ì ¯ (5ê°œ í…ŒìŠ¤íŠ¸)
4. PurchaseButton ìœ„ì ¯ (4ê°œ í…ŒìŠ¤íŠ¸)
5. UpsellDialog ìœ„ì ¯ (4ê°œ í…ŒìŠ¤íŠ¸)
6. ì„±ê²½ êµ¬ì ˆ í”¼ë“œ í†µí•© (3ê°œ í…ŒìŠ¤íŠ¸)
7. ê¸°ë„ ë³´ê´€í•¨ í†µí•© (3ê°œ í…ŒìŠ¤íŠ¸)
8. iOS/Android êµ¬ë§¤ í”Œë¡œìš° (17ê°œ í†µí•© í…ŒìŠ¤íŠ¸)

**ì˜ˆìƒ ê¸°ê°„**: 1-2ì£¼

---

## ë¬¸ì„œ ì—…ë°ì´íŠ¸

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-21

**ê´€ë¦¬ì**: ê°œë°œíŒ€
**ë¦¬í¬ì§€í† ë¦¬**: GitHub (ë¹„ê³µê°œ)
**Supabase í”„ë¡œì íŠ¸**: [í”„ë¡œì íŠ¸ URL]

**ê´€ë ¨ ë¬¸ì„œ**:
- `CLAUDE.md`: í”„ë¡œì íŠ¸ ì§€ì¹¨ ë° ì—ì´ì „íŠ¸ ì‚¬ìš©ë²•
- `PLANNER.md`: ìƒìœ„ ìˆ˜ì¤€ ê°œë°œ ê³„íš
- `README.md`: ì‹œì‘ ê°€ì´ë“œ
- `checklist/phase*.md`: ìƒì„¸ TDD ì²´í¬ë¦¬ìŠ¤íŠ¸

---

## ê²°ë¡ 

One MessageëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì˜ ì„¤ê³„ëœ ì˜ì  ì„±ì¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤:
- **í´ë¦° ì•„í‚¤í…ì²˜**ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í™•ë³´
- **TDD ë°©ë²•ë¡ **ìœ¼ë¡œ ì‹ ë¢°ì„± í™•ë³´ (198ê°œ í…ŒìŠ¤íŠ¸)
- **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°**ìœ¼ë¡œ ì˜ˆì¸¡ ê°€ëŠ¥ì„± í™•ë³´
- **Supabase BaaS**ë¡œ í™•ì¥ì„± í™•ë³´
- **í”„ë¦¬ë¯¸ì—„ ëª¨ë¸**ë¡œ ì§€ì† ê°€ëŠ¥ì„± í™•ë³´

í˜„ì¬ ìƒíƒœ: **74% ì™„ë£Œ**, 4-3ë‹¨ê³„ UI êµ¬í˜„ ë° 5ë‹¨ê³„ ì¶œì‹œ ì¤€ë¹„ ì™„ë£Œ.

---

*ì´ ëª…ì„¸ì„œëŠ” ì‚´ì•„ìˆëŠ” ë¬¸ì„œì´ë©° í”„ë¡œì íŠ¸ê°€ ë°œì „í•¨ì— ë”°ë¼ ì—…ë°ì´íŠ¸ë  ê²ƒì…ë‹ˆë‹¤.*
